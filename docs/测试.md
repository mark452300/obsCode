# OBS SDK 测试套件

本目录包含 OBS SDK 的完整测试套件，采用模块化设计，避免重复测试。

## 📁 测试文件结构

```
tests/
├── README.md                    # 本文件 - 测试说明
├── TEST_SUMMARY.md              # 测试整理总结
├── run_tests.py                 # 🚀 统一测试运行器（推荐使用）
├── test_scenes.py               # 🎬 场景管理测试
├── test_inputs.py               # 🎵 输入管理测试
└── run_scene_tests.py           # 🎬 场景测试专用运行器（保留兼容性）

examples/
└── input_kinds_demo.py          # 📚 输入类型演示
```

## 🚀 快速开始

### 运行所有测试（推荐）
```bash
# 使用统一测试运行器
py -3.11 tests/run_tests.py
```

### 运行特定模块测试
```bash
# 只运行场景管理测试
py -3.11 tests/run_tests.py --scenes

# 只运行输入管理测试
py -3.11 tests/run_tests.py --inputs

# 运行示例演示
py -3.11 tests/run_tests.py --examples

# 检查 OBS 连接
py -3.11 tests/run_tests.py --check-connection
```

## 📋 测试模块说明

### 1. 场景管理测试 (`test_scenes.py`)
- ✅ 连接状态检查
- ✅ 场景列表获取
- ✅ 场景创建和删除
- ✅ 场景切换
- ✅ Studio Mode 控制
- ✅ 转场操作
- ✅ 错误处理

### 2. 输入管理测试 (`test_inputs.py`)
- ✅ 输入源列表获取
- ✅ 输入类型列表获取
- ✅ 音频输入识别
- ✅ 静音控制（静音/取消静音/切换）
- ✅ 设置管理
- ✅ 信息摘要
- ✅ 错误处理

## ⚙️ 测试前置条件

### 1. 环境要求
- Python 3.11+
- obs-websocket-py 库

### 2. OBS 配置
1. **启动 OBS Studio**
2. **启用 WebSocket 服务器**：
   - 进入 **工具** → **obs-websocket 设置**
   - 勾选 **启用 WebSocket 服务器**
   - 设置端口（默认：4455）
   - 设置密码（可选）

## 🔧 故障排除

### 连接失败
**解决方案：**
1. 确认 OBS Studio 正在运行
2. 检查 WebSocket 服务器是否已启用
3. 验证端口和密码配置

### 模块导入错误
**解决方案：**
1. 确保在项目根目录运行测试
2. 使用提供的测试运行器：`py -3.11 tests/run_tests.py`

---

**推荐使用统一测试运行器 `run_tests.py` 来执行所有测试！** 🚀
