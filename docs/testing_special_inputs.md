# get_special_inputs æ–¹æ³•æµ‹è¯•æ–‡æ¡£

## æ¦‚è¿°

æœ¬æ–‡æ¡£æè¿°äº†ä¸º `InputManager.get_special_inputs()` æ–¹æ³•ç¼–å†™çš„æµ‹è¯•ç”¨ä¾‹ï¼ŒåŒ…æ‹¬å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•å’Œæ‰‹åŠ¨æµ‹è¯•ã€‚

## æ–¹æ³•åŠŸèƒ½

`get_special_inputs()` æ–¹æ³•ç”¨äºè·å– OBS ä¸­çš„ç‰¹æ®Šè¾“å…¥æºåç§°ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«ä»¥ä¸‹é”®çš„å­—å…¸ï¼š

- `desktop1`: æ¡Œé¢éŸ³é¢‘ 1
- `desktop2`: æ¡Œé¢éŸ³é¢‘ 2  
- `mic1`: éº¦å…‹é£ 1
- `mic2`: éº¦å…‹é£ 2
- `mic3`: éº¦å…‹é£ 3
- `mic4`: éº¦å…‹é£ 4

## æµ‹è¯•æ–‡ä»¶ç»“æ„

```
tests/
â”œâ”€â”€ test_inputs.py              # ä¸»è¦çš„è¾“å…¥ç®¡ç†å™¨æµ‹è¯•ï¼ˆå·²æ›´æ–°ï¼‰
â”œâ”€â”€ test_special_inputs.py      # ä¸“é—¨çš„ç‰¹æ®Šè¾“å…¥æºæµ‹è¯•
â””â”€â”€ run_special_inputs_test.py  # ç‰¹æ®Šè¾“å…¥æºæµ‹è¯•è¿è¡Œå™¨
```

## æµ‹è¯•ç±»å‹

### 1. å•å…ƒæµ‹è¯• (test_special_inputs.py)

**TestSpecialInputs ç±»**ï¼š
- `test_get_special_inputs_success`: æµ‹è¯•æˆåŠŸè·å–ç‰¹æ®Šè¾“å…¥æº
- `test_get_special_inputs_partial_data`: æµ‹è¯•éƒ¨åˆ†æ•°æ®çš„æƒ…å†µ
- `test_get_special_inputs_no_datain`: æµ‹è¯•å“åº”ä¸­æ²¡æœ‰ datain å±æ€§
- `test_get_special_inputs_exception`: æµ‹è¯•å¼‚å¸¸æƒ…å†µ
- `test_get_special_inputs_empty_response`: æµ‹è¯•ç©ºå“åº”
- `test_get_special_inputs_none_values`: æµ‹è¯• None å€¼çš„å¤„ç†

**TestSpecialInputsIntegration ç±»**ï¼š
- `test_integration_with_real_obs`: ä¸çœŸå® OBS çš„é›†æˆæµ‹è¯•

### 2. é›†æˆæµ‹è¯• (test_inputs.py)

åœ¨ç°æœ‰çš„è¾“å…¥ç®¡ç†å™¨æµ‹è¯•ä¸­æ·»åŠ äº† `get_special_inputs` çš„æµ‹è¯•ï¼š
- åŸºæœ¬åŠŸèƒ½éªŒè¯
- è¿”å›å€¼ç±»å‹æ£€æŸ¥
- é…ç½®çŠ¶æ€æ˜¾ç¤º

### 3. æ‰‹åŠ¨æµ‹è¯• (run_special_inputs_test.py)

æä¾›äº†è¯¦ç»†çš„æ‰‹åŠ¨æµ‹è¯•åŠŸèƒ½ï¼š
- åŸºæœ¬åŠŸèƒ½æµ‹è¯•
- è¿”å›ç±»å‹éªŒè¯
- é”®çš„å®Œæ•´æ€§éªŒè¯
- å€¼çš„ç±»å‹éªŒè¯
- é…ç½®çŠ¶æ€åˆ†æ
- å¤šæ¬¡è°ƒç”¨ä¸€è‡´æ€§æµ‹è¯•
- ä¸å…¶ä»–æ–¹æ³•çš„é›†æˆæµ‹è¯•

## è¿è¡Œæµ‹è¯•

### è¿è¡Œæ‰€æœ‰è¾“å…¥ç®¡ç†å™¨æµ‹è¯•
```bash
py -3.11 tests/test_inputs.py
```

### è¿è¡Œç‰¹æ®Šè¾“å…¥æºä¸“é—¨æµ‹è¯•
```bash
# æ‰‹åŠ¨æµ‹è¯•
py -3.11 tests/test_special_inputs.py

# å•å…ƒæµ‹è¯•
py -3.11 tests/test_special_inputs.py --unit

# ä¸“é—¨çš„æµ‹è¯•è¿è¡Œå™¨
py -3.11 tests/run_special_inputs_test.py
```

## æµ‹è¯•è¦†ç›–çš„åœºæ™¯

### æ­£å¸¸æƒ…å†µ
- âœ… æˆåŠŸè·å–ç‰¹æ®Šè¾“å…¥æº
- âœ… è¿”å›æ­£ç¡®çš„æ•°æ®ç±»å‹ (dict)
- âœ… åŒ…å«æ‰€æœ‰é¢„æœŸçš„é”®
- âœ… æ‰€æœ‰å€¼éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹
- âœ… æ­£ç¡®å¤„ç†å·²é…ç½®å’Œæœªé…ç½®çš„è¾“å…¥æº

### è¾¹ç•Œæƒ…å†µ
- âœ… å¤„ç† None å€¼ï¼ˆè½¬æ¢ä¸ºç©ºå­—ç¬¦ä¸²ï¼‰
- âœ… å¤„ç†éƒ¨åˆ†æ•°æ®ç¼ºå¤±
- âœ… å¤„ç†ç©ºå“åº”
- âœ… å¤„ç†å“åº”ä¸­æ²¡æœ‰ datain å±æ€§

### å¼‚å¸¸æƒ…å†µ
- âœ… ç½‘ç»œè¿æ¥å¼‚å¸¸
- âœ… OBS è°ƒç”¨å¤±è´¥
- âœ… å“åº”æ ¼å¼å¼‚å¸¸

### é›†æˆæµ‹è¯•
- âœ… ä¸å…¶ä»–è¾“å…¥ç®¡ç†å™¨æ–¹æ³•çš„ååŒå·¥ä½œ
- âœ… ç‰¹æ®Šè¾“å…¥æºæ˜¯å¦å­˜åœ¨äºæ€»è¾“å…¥æºåˆ—è¡¨ä¸­
- âœ… å¤šæ¬¡è°ƒç”¨çš„ä¸€è‡´æ€§

## æµ‹è¯•ç»“æœç¤ºä¾‹

```
ğŸ¯ æµ‹è¯• get_special_inputs():
ç‰¹æ®Šè¾“å…¥æº: {'desktop1': 'æ¡Œé¢éŸ³é¢‘', 'desktop2': '', 'mic1': 'éº¦å…‹é£/Aux', 'mic2': '', 'mic3': '', 'mic4': ''}
  desktop1: æ¡Œé¢éŸ³é¢‘ (âœ… å·²é…ç½®)
  desktop2:  (âš ï¸ æœªé…ç½®)
  mic1: éº¦å…‹é£/Aux (âœ… å·²é…ç½®)
  mic2:  (âš ï¸ æœªé…ç½®)
  mic3:  (âš ï¸ æœªé…ç½®)
  mic4:  (âš ï¸ æœªé…ç½®)

ğŸ“Š é…ç½®ç»Ÿè®¡: 2/6 ä¸ªç‰¹æ®Šè¾“å…¥æºå·²é…ç½®
```

## ä»£ç ä¿®å¤

åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­å‘ç°å¹¶ä¿®å¤äº†ä¸€ä¸ªé—®é¢˜ï¼šå½“ OBS è¿”å› `None` å€¼æ—¶ï¼ŒåŸå§‹ä»£ç æ²¡æœ‰æ­£ç¡®å¤„ç†ã€‚ä¿®å¤æ–¹æ¡ˆï¼š

```python
# ä¿®å¤å‰
'desktop1': response.datain.get('desktop1', ''),

# ä¿®å¤å  
'desktop1': response.datain.get('desktop1') or '',
```

è¿™ç¡®ä¿äº†å³ä½¿ OBS è¿”å› `None` å€¼ï¼Œæ–¹æ³•ä¹Ÿä¼šè¿”å›ç©ºå­—ç¬¦ä¸²è€Œä¸æ˜¯ `None`ã€‚

## æµ‹è¯•æœ€ä½³å®è·µ

1. **å…¨é¢è¦†ç›–**ï¼šæµ‹è¯•æ­£å¸¸æƒ…å†µã€è¾¹ç•Œæƒ…å†µå’Œå¼‚å¸¸æƒ…å†µ
2. **ç±»å‹éªŒè¯**ï¼šç¡®ä¿è¿”å›å€¼çš„ç±»å‹ç¬¦åˆé¢„æœŸ
3. **æ•°æ®å®Œæ•´æ€§**ï¼šéªŒè¯è¿”å›æ•°æ®çš„ç»“æ„å’Œå†…å®¹
4. **é”™è¯¯å¤„ç†**ï¼šæµ‹è¯•å„ç§å¼‚å¸¸æƒ…å†µçš„å¤„ç†
5. **é›†æˆæµ‹è¯•**ï¼šéªŒè¯ä¸å…¶ä»–ç»„ä»¶çš„ååŒå·¥ä½œ
6. **å¯é‡å¤æ€§**ï¼šç¡®ä¿æµ‹è¯•ç»“æœçš„ä¸€è‡´æ€§

## æ³¨æ„äº‹é¡¹

- é›†æˆæµ‹è¯•éœ€è¦ OBS Studio è¿è¡Œ
- æµ‹è¯•ä¸ä¼šä¿®æ”¹ OBS çš„å®é™…é…ç½®
- æµ‹è¯•ç»“æœå¯èƒ½å›  OBS é…ç½®ä¸åŒè€Œæœ‰æ‰€å·®å¼‚
- å»ºè®®åœ¨ä¸åŒçš„ OBS é…ç½®ä¸‹è¿è¡Œæµ‹è¯•ä»¥éªŒè¯å…¼å®¹æ€§
